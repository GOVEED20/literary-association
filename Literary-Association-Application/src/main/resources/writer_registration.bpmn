<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_0my87cy" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.4.0">
  <bpmn:process id="Writer_registration" name="Input registration data" isExecutable="true">
    <bpmn:startEvent id="Event_1fgy1c6">
      <bpmn:outgoing>Flow_12th27c</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Reg_form_writer" name="Input registration data" camunda:formKey="registration_data">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="username" label="Username" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
              <camunda:property id="required" value="required" />
              <camunda:property id="minLength" value="8" />
              <camunda:property id="placeholder" value="Username" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
              <camunda:constraint name="minlength" config="8" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="password" label="Password" type="string">
            <camunda:properties>
              <camunda:property id="type" value="password" />
              <camunda:property id="pattern" value="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#38;])[A-Za-z\d@$!%*?&#38;]{8,}$" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="Password" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="name" label="Name" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="Name" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="surname" label="Surname" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="Surname" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="country" label="Country" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="Country" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="city" label="City" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="City" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="email" label="Email" type="string">
            <camunda:properties>
              <camunda:property id="type" value="email" />
              <camunda:property id="pattern" value="^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$" />
              <camunda:property id="required" value="required" />
              <camunda:property id="placeholder" value="Email address" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="genres" label="Genres" type="string">
            <camunda:properties>
              <camunda:property id="type" value="select" />
              <camunda:property id="required" value="required" />
              <camunda:property id="multiple" value="multiple" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12th27c</bpmn:incoming>
      <bpmn:incoming>Flow_19nwbm4</bpmn:incoming>
      <bpmn:outgoing>Flow_1lkklzi</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_12th27c" sourceRef="Event_1fgy1c6" targetRef="Reg_form_writer" />
    <bpmn:serviceTask id="Create_user" name="Create user" camunda:class="goveed20.LiteraryAssociationApplication.delegates.RegistrationDelegate">
      <bpmn:incoming>Flow_1s3wu6d</bpmn:incoming>
      <bpmn:outgoing>Flow_0esf2ku</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Send_email_with_activation_link" name="Send email with activation link" camunda:class="goveed20.LiteraryAssociationApplication.delegates.EmailDelegate">
      <bpmn:incoming>Flow_0esf2ku</bpmn:incoming>
      <bpmn:outgoing>Flow_1d8s9zr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0esf2ku" sourceRef="Create_user" targetRef="Send_email_with_activation_link" />
    <bpmn:userTask id="Activity_1msg0et" name="Submit writings" camunda:formKey="submit_writings_form" camunda:assignee="${user}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="writing1" label="First writing" type="string">
            <camunda:properties>
              <camunda:property id="type" value="file" />
              <camunda:property id="required" value="required" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="writing2" label="Second writing" type="string">
            <camunda:properties>
              <camunda:property id="type" value="file" />
              <camunda:property id="required" value="required" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">execution.setVariable("i", 0);</camunda:script>
        </camunda:executionListener>
        <camunda:properties>
          <camunda:property name="blocking" value="true" />
          <camunda:property name="submitUrl" value="/writer/writings" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1yx68fj</bpmn:incoming>
      <bpmn:incoming>Flow_0qfe1cs</bpmn:incoming>
      <bpmn:outgoing>Flow_13uw9l5</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_135oed2" name="Review writings" camunda:formKey="review_writings_form" camunda:candidateUsers="${board_members}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="status" label="Decision" type="enum">
            <camunda:properties>
              <camunda:property id="type" value="select" />
              <camunda:property id="required" value="required" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="SUITABLE" name="Suitable" />
            <camunda:value id="UNSUITABLE" name="Unsuitable" />
            <camunda:value id="REQUIRES_FURTHER_REVIEW" name="Requires further review" />
          </camunda:formField>
          <camunda:formField id="comments" label="Comments" type="string">
            <camunda:properties>
              <camunda:property id="type" value="text" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:properties>
          <camunda:property name="blocking" value="true" />
          <camunda:property name="submitUrl" value="/writer/writings/review" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1cpt5bg</bpmn:incoming>
      <bpmn:outgoing>Flow_1lwznmo</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${board_members}" camunda:elementVariable="current_board_member" />
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1lwznmo" sourceRef="Activity_135oed2" targetRef="evaluate_reviews_script_task" />
    <bpmn:scriptTask id="evaluate_reviews_script_task" name="Evaluate reviews" scriptFormat="javascript">
      <bpmn:incoming>Flow_1lwznmo</bpmn:incoming>
      <bpmn:outgoing>Flow_1iney65</bpmn:outgoing>
      <bpmn:script>var board_members = execution.getVariable("board_members");
var total = board_members.length;
var suitable, further_review = 0;
for(var result of results) {
	if(result['status'] === "SUITABLE") {
		suitable++;
	} else if(result['status'] === "REQUIERS_FURTHER_REVIEWS") {
		further_review;
	}
}
execution.setVariable("suitable", suitable &gt;= total/2);
execution.setVariable("further_review", further_review &gt; 0)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_1nd5m05" name="Prepare review data" camunda:class="goveed20.LiteraryAssociationApplication.delegates.ReviewDelegate">
      <bpmn:incoming>Flow_1jjk1vb</bpmn:incoming>
      <bpmn:incoming>Flow_13uw9l5</bpmn:incoming>
      <bpmn:outgoing>Flow_1cpt5bg</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1cpt5bg" sourceRef="Activity_1nd5m05" targetRef="Activity_135oed2" />
    <bpmn:userTask id="Activity_0tp2u2y" name="Pay membership" camunda:assignee="${writer}">
      <bpmn:extensionElements>
        <camunda:executionListener class="MembershipDelegate" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1o6xo41</bpmn:incoming>
      <bpmn:outgoing>Flow_141qozr</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="Event_0bgvvef" name="Membership not paid in time" attachedToRef="Activity_0tp2u2y">
      <bpmn:outgoing>Flow_0ewnskb</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_16yl64j">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P14D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:serviceTask id="Activity_0wlpdko" name="Notify writer" camunda:class="NotificationDelegate">
      <bpmn:incoming>Flow_1pl9941</bpmn:incoming>
      <bpmn:incoming>Flow_0ewnskb</bpmn:incoming>
      <bpmn:outgoing>Flow_0rx8woe</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_1t0obmw" name="Writer is not registered">
      <bpmn:incoming>Flow_0rx8woe</bpmn:incoming>
      <bpmn:incoming>Flow_147nc8h</bpmn:incoming>
      <bpmn:incoming>Flow_1281tdc</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_08b1qfp" name="Writer is registered">
      <bpmn:incoming>Flow_141qozr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Activity_1flwtkz" name="Submit more writings" camunda:assignee="${writer}">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript">var i = execution.getVariable("i");
i++;
execution.setVariable("i", i);
}</camunda:script>
        </camunda:executionListener>
        <camunda:properties>
          <camunda:property name="blocking" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1qk69lh</bpmn:incoming>
      <bpmn:incoming>Flow_0yq4isp</bpmn:incoming>
      <bpmn:incoming>Flow_0mtyfuq</bpmn:incoming>
      <bpmn:incoming>Flow_0cx4isb</bpmn:incoming>
      <bpmn:outgoing>Flow_1jjk1vb</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:boundaryEvent id="Event_1ta7som" name="New writings not submitted" attachedToRef="Activity_1flwtkz">
      <bpmn:outgoing>Flow_1pl9941</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1nv2xqb">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">${review_duration}</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1jjk1vb" sourceRef="Activity_1flwtkz" targetRef="Activity_1nd5m05" />
    <bpmn:intermediateCatchEvent id="Confirmation_link_event" name="Confirmation link event">
      <bpmn:incoming>Flow_1d8s9zr</bpmn:incoming>
      <bpmn:outgoing>Flow_1yx68fj</bpmn:outgoing>
      <bpmn:signalEventDefinition id="SignalEventDefinition_0ee6rrc" signalRef="Signal_0rwpehp" />
    </bpmn:intermediateCatchEvent>
    <bpmn:scriptTask id="Set_user_role" name="Set user role" scriptFormat="javascript">
      <bpmn:incoming>Flow_1rpe5z7</bpmn:incoming>
      <bpmn:outgoing>Flow_1s3wu6d</bpmn:outgoing>
      <bpmn:script>execution.setVariable("userRole", "writer");</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_1s3wu6d" sourceRef="Set_user_role" targetRef="Create_user" />
    <bpmn:sequenceFlow id="Flow_1d8s9zr" sourceRef="Send_email_with_activation_link" targetRef="Confirmation_link_event" />
    <bpmn:sequenceFlow id="Flow_1yx68fj" sourceRef="Confirmation_link_event" targetRef="Activity_1msg0et" />
    <bpmn:sequenceFlow id="Flow_13uw9l5" sourceRef="Activity_1msg0et" targetRef="Activity_1nd5m05" />
    <bpmn:boundaryEvent id="Invalid_writings_event" name="Invalid writings event" attachedToRef="Activity_1msg0et">
      <bpmn:outgoing>Flow_0qfe1cs</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0qyrrml" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0qfe1cs" sourceRef="Invalid_writings_event" targetRef="Activity_1msg0et" />
    <bpmn:boundaryEvent id="Event_0ugj8j4" name="InvalidDataError" attachedToRef="Reg_form_writer">
      <bpmn:outgoing>Flow_1qk69lh</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1a32usn" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1qk69lh" sourceRef="Event_0ugj8j4" targetRef="Activity_1flwtkz" />
    <bpmn:boundaryEvent id="Invalid_writings_event2" name="Invalid writings event" attachedToRef="Activity_1flwtkz">
      <bpmn:outgoing>Flow_0yq4isp</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1rqjwjc" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0yq4isp" sourceRef="Invalid_writings_event2" targetRef="Activity_1flwtkz" />
    <bpmn:boundaryEvent id="Invalid_writings_2" name="Invalid writings" attachedToRef="Activity_1flwtkz">
      <bpmn:outgoing>Flow_0mtyfuq</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0za4fg0" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0mtyfuq" sourceRef="Invalid_writings_2" targetRef="Activity_1flwtkz" />
    <bpmn:sequenceFlow id="Flow_1rpe5z7" sourceRef="Activity_0xdez2j" targetRef="Set_user_role" />
    <bpmn:scriptTask id="Activity_0xdez2j" name="Set bpmn file" scriptFormat="javascript">
      <bpmn:incoming>Flow_1yl9983</bpmn:incoming>
      <bpmn:outgoing>Flow_1rpe5z7</bpmn:outgoing>
      <bpmn:script>execution.setVariable("bpmnFile", "writer_registration");</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_1pl9941" sourceRef="Event_1ta7som" targetRef="Activity_0wlpdko" />
    <bpmn:sequenceFlow id="Flow_0rx8woe" sourceRef="Activity_0wlpdko" targetRef="Event_1t0obmw" />
    <bpmn:sequenceFlow id="Flow_141qozr" sourceRef="Activity_0tp2u2y" targetRef="Event_08b1qfp" />
    <bpmn:sequenceFlow id="Flow_0ewnskb" sourceRef="Event_0bgvvef" targetRef="Activity_0wlpdko" />
    <bpmn:sequenceFlow id="Flow_1iney65" sourceRef="evaluate_reviews_script_task" targetRef="Activity_0n8zl7e" />
    <bpmn:exclusiveGateway id="Gateway_0h1nu6p">
      <bpmn:incoming>Flow_1bejw6x</bpmn:incoming>
      <bpmn:outgoing>Flow_0bt3qlv</bpmn:outgoing>
      <bpmn:outgoing>Flow_147nc8h</bpmn:outgoing>
      <bpmn:outgoing>Flow_1281tdc</bpmn:outgoing>
      <bpmn:outgoing>Flow_0cx4isb</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0bt3qlv" name="Writer is suitable" sourceRef="Gateway_0h1nu6p" targetRef="Activity_0enuqnf">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${suitable == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_147nc8h" name="Writer is unsuitable" sourceRef="Gateway_0h1nu6p" targetRef="Event_1t0obmw">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${suitable == false &amp;&amp; further_review == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0n8zl7e" name="Notify writer" camunda:class="NotificationDelegate">
      <bpmn:incoming>Flow_1iney65</bpmn:incoming>
      <bpmn:outgoing>Flow_1bejw6x</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1bejw6x" sourceRef="Activity_0n8zl7e" targetRef="Gateway_0h1nu6p" />
    <bpmn:sequenceFlow id="Flow_1o6xo41" sourceRef="Activity_0enuqnf" targetRef="Activity_0tp2u2y" />
    <bpmn:serviceTask id="Activity_0enuqnf" name="Prepare membership transaction" camunda:class="MembershipTransactionDelegate">
      <bpmn:incoming>Flow_0bt3qlv</bpmn:incoming>
      <bpmn:outgoing>Flow_1o6xo41</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0cx4isb" name="Can be reviewed again" sourceRef="Gateway_0h1nu6p" targetRef="Activity_1flwtkz">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${further_review == true &amp;&amp; i &lt; 3}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1281tdc" name="Needs further review but review more than 3 times" sourceRef="Gateway_0h1nu6p" targetRef="Event_1t0obmw">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${further_review == true &amp;&amp; i &gt; 3}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1yl9983" sourceRef="Check_registration_data" targetRef="Activity_0xdez2j" />
    <bpmn:sequenceFlow id="Flow_1lkklzi" sourceRef="Reg_form_writer" targetRef="Check_registration_data" />
    <bpmn:serviceTask id="Check_registration_data" name="Check registration data" camunda:class="goveed20.LiteraryAssociationApplication.delegates.writerRegistration.CheckWriterRegistrationDataDelegate">
      <bpmn:incoming>Flow_1lkklzi</bpmn:incoming>
      <bpmn:outgoing>Flow_1yl9983</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_1ewqn3n" name="Bad registration data" attachedToRef="Check_registration_data">
      <bpmn:outgoing>Flow_19nwbm4</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_08el3sp" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_19nwbm4" sourceRef="Event_1ewqn3n" targetRef="Reg_form_writer" />
  </bpmn:process>
  <bpmn:signal id="Signal_0rwpehp" name="Confirmation_link_signal" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Writer_registration">
      <bpmndi:BPMNEdge id="Flow_1281tdc_di" bpmnElement="Flow_1281tdc">
        <di:waypoint x="1973" y="270" />
        <di:waypoint x="2193" y="270" />
        <di:waypoint x="2193" y="300" />
        <di:waypoint x="2415" y="300" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1978" y="252" width="89" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cx4isb_di" bpmnElement="Flow_0cx4isb">
        <di:waypoint x="1930" y="277" />
        <di:waypoint x="1930" y="650" />
        <di:waypoint x="1870" y="650" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1888" y="621" width="83" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1o6xo41_di" bpmnElement="Flow_1o6xo41">
        <di:waypoint x="2060" y="120" />
        <di:waypoint x="2090" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bejw6x_di" bpmnElement="Flow_1bejw6x">
        <di:waypoint x="1860" y="280" />
        <di:waypoint x="1892" y="280" />
        <di:waypoint x="1892" y="270" />
        <di:waypoint x="1923" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_147nc8h_di" bpmnElement="Flow_147nc8h">
        <di:waypoint x="1948" y="295" />
        <di:waypoint x="1948" y="500" />
        <di:waypoint x="2430" y="500" />
        <di:waypoint x="2430" y="308" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1960" y="487" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bt3qlv_di" bpmnElement="Flow_0bt3qlv">
        <di:waypoint x="1948" y="245" />
        <di:waypoint x="1948" y="203" />
        <di:waypoint x="2010" y="203" />
        <di:waypoint x="2010" y="160" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1924" y="182" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iney65_di" bpmnElement="Flow_1iney65">
        <di:waypoint x="1710" y="270" />
        <di:waypoint x="1760" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ewnskb_di" bpmnElement="Flow_0ewnskb">
        <di:waypoint x="2170" y="178" />
        <di:waypoint x="2170" y="230" />
        <di:waypoint x="2250" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_141qozr_di" bpmnElement="Flow_141qozr">
        <di:waypoint x="2190" y="120" />
        <di:waypoint x="2312" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rx8woe_di" bpmnElement="Flow_0rx8woe">
        <di:waypoint x="2350" y="230" />
        <di:waypoint x="2381" y="230" />
        <di:waypoint x="2381" y="290" />
        <di:waypoint x="2412" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pl9941_di" bpmnElement="Flow_1pl9941">
        <di:waypoint x="1822" y="708" />
        <di:waypoint x="1822" y="738" />
        <di:waypoint x="2330" y="738" />
        <di:waypoint x="2330" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rpe5z7_di" bpmnElement="Flow_1rpe5z7">
        <di:waypoint x="590" y="250" />
        <di:waypoint x="620" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mtyfuq_di" bpmnElement="Flow_0mtyfuq">
        <di:waypoint x="1832" y="592" />
        <di:waypoint x="1832" y="572" />
        <di:waypoint x="1750" y="572" />
        <di:waypoint x="1750" y="640" />
        <di:waypoint x="1770" y="640" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qfe1cs_di" bpmnElement="Flow_0qfe1cs">
        <di:waypoint x="1230" y="328" />
        <di:waypoint x="1230" y="380" />
        <di:waypoint x="1170" y="380" />
        <di:waypoint x="1170" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13uw9l5_di" bpmnElement="Flow_13uw9l5">
        <di:waypoint x="1250" y="270" />
        <di:waypoint x="1280" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yx68fj_di" bpmnElement="Flow_1yx68fj">
        <di:waypoint x="1088" y="250" />
        <di:waypoint x="1119" y="250" />
        <di:waypoint x="1119" y="270" />
        <di:waypoint x="1150" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1d8s9zr_di" bpmnElement="Flow_1d8s9zr">
        <di:waypoint x="970" y="250" />
        <di:waypoint x="1052" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1s3wu6d_di" bpmnElement="Flow_1s3wu6d">
        <di:waypoint x="720" y="250" />
        <di:waypoint x="740" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jjk1vb_di" bpmnElement="Flow_1jjk1vb">
        <di:waypoint x="1770" y="660" />
        <di:waypoint x="1330" y="660" />
        <di:waypoint x="1330" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cpt5bg_di" bpmnElement="Flow_1cpt5bg">
        <di:waypoint x="1380" y="270" />
        <di:waypoint x="1440" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lwznmo_di" bpmnElement="Flow_1lwznmo">
        <di:waypoint x="1540" y="270" />
        <di:waypoint x="1610" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0esf2ku_di" bpmnElement="Flow_0esf2ku">
        <di:waypoint x="840" y="250" />
        <di:waypoint x="870" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12th27c_di" bpmnElement="Flow_12th27c">
        <di:waypoint x="188" y="250" />
        <di:waypoint x="220" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yl9983_di" bpmnElement="Flow_1yl9983">
        <di:waypoint x="460" y="250" />
        <di:waypoint x="490" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lkklzi_di" bpmnElement="Flow_1lkklzi">
        <di:waypoint x="320" y="250" />
        <di:waypoint x="360" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19nwbm4_di" bpmnElement="Flow_19nwbm4">
        <di:waypoint x="440" y="308" />
        <di:waypoint x="440" y="328" />
        <di:waypoint x="270" y="328" />
        <di:waypoint x="270" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1fgy1c6_di" bpmnElement="Event_1fgy1c6">
        <dc:Bounds x="152" y="232" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04hl6b0_di" bpmnElement="Create_user">
        <dc:Bounds x="740" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0do2vc8_di" bpmnElement="Send_email_with_activation_link">
        <dc:Bounds x="870" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00gxjnm_di" bpmnElement="Activity_1msg0et">
        <dc:Bounds x="1150" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0hi0a0h_di" bpmnElement="Activity_135oed2">
        <dc:Bounds x="1440" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_09vps2p_di" bpmnElement="evaluate_reviews_script_task">
        <dc:Bounds x="1610" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12j1urq_di" bpmnElement="Activity_1nd5m05">
        <dc:Bounds x="1280" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0bk7nw1_di" bpmnElement="Activity_0tp2u2y">
        <dc:Bounds x="2090" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ksstgm_di" bpmnElement="Activity_0wlpdko">
        <dc:Bounds x="2250" y="190" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1t0obmw_di" bpmnElement="Event_1t0obmw">
        <dc:Bounds x="2412" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2400" y="235" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_08b1qfp_di" bpmnElement="Event_08b1qfp">
        <dc:Bounds x="2312" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2306" y="145" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0oxwzd4_di" bpmnElement="Activity_1flwtkz">
        <dc:Bounds x="1770" y="610" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_05mx4ns_di" bpmnElement="Confirmation_link_event">
        <dc:Bounds x="1052" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1030" y="275" width="83" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1dck42m_di" bpmnElement="Set_user_role">
        <dc:Bounds x="620" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_15hk2iw_di" bpmnElement="Gateway_0h1nu6p" isMarkerVisible="true">
        <dc:Bounds x="1923" y="245" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1thb5u6_di" bpmnElement="Activity_0n8zl7e">
        <dc:Bounds x="1760" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0l0a5fu_di" bpmnElement="Activity_0enuqnf">
        <dc:Bounds x="1960" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rihjae_di" bpmnElement="Activity_0xdez2j">
        <dc:Bounds x="490" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ucej54_di" bpmnElement="Reg_form_writer">
        <dc:Bounds x="220" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0kkuknr_di" bpmnElement="Check_registration_data">
        <dc:Bounds x="360" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0e66qlt_di" bpmnElement="Invalid_writings_2">
        <dc:Bounds x="1814" y="592" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1745" y="573" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1fcbex6_di" bpmnElement="Invalid_writings_event">
        <dc:Bounds x="1212" y="292" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1204" y="336" width="73" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1gmtgzj_di" bpmnElement="Event_1ta7som">
        <dc:Bounds x="1804" y="672" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1801" y="715" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0yf182p_di" bpmnElement="Event_0bgvvef">
        <dc:Bounds x="2152" y="142" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2131" y="185" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02hrp8u_di" bpmnElement="Event_1ewqn3n">
        <dc:Bounds x="422" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="401" y="314" width="78" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
